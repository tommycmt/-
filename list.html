<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>聖誕派對一番賞抽獎</title>
  <script src="./js/all.js"></script>
  <link rel="stylesheet" href="./css/bg.css">
  <link rel="stylesheet" href="./css/list.css">
</head>

<body>
  <div class="background">
    <section class="snow">
      <div class="snowflake"><i class="fa-regular fa-snowflake"></i></div>
      <div class="snowflake1"><i class="fa-regular fa-snowflake"></i></div>
      <div class="snowflake2"><i class="fa-regular fa-snowflake"></i></div>
      <div class="snowflake3"><i class="fa-regular fa-snowflake"></i></div>
      <div class="snowflake4"><i class="fa-regular fa-snowflake"></i></div>
      <div class="snowflake5"><i class="fa-regular fa-snowflake"></i></div>
      <div class="snowflake6"><i class="fa-regular fa-snowflake"></i></div>
      <div class="snowflake7"><i class="fa-regular fa-snowflake"></i></div>
      <div class="snowflake8"><i class="fa-regular fa-snowflake"></i></div>
      <div class="snowflake9"><i class="fa-regular fa-snowflake"></i></div>
      <div class="snowflake10"><i class="fa-solid fa-snowflake"></i></div>
      <div class="snowflake11"><i class="fa-solid fa-snowflake"></i></div>
      <div class="snowflake12"><i class="fa-regular fa-snowflake"></i></div>
      <div class="snowflake13"><i class="fa-regular fa-snowflake"></i></div>
      <div class="snowflake14"><i class="fa-regular fa-snowflake"></i></div>
    </section>
  </div>
  <div class="list-container">
    <h1>🎄 聖誕派對一番賞抽獎 🎄</h1>
    <div class="prizes">
      <div class="prize" id="prize-1">
        <div class="prize-cat prize-cat-S1">LAST ONE DOUBLE CHANCE</div>
        <div class="prize-name">超豪華聖誕禮盒</div>
        <div class="remaining">1/1</div>
      </div>
      <div class="prize" id="prize-2">
        <div class="prize-cat prize-cat-S2">LAST ONE</div>
        <div class="prize-name">豪華聖誕禮盒</div>
        <div class="remaining">1/1</div>
      </div>
      <div class="prize" id="prize-3">
        <div class="prize-cat prize-cat-A">A</div>
        <div class="prize-name">超豪華聖誕禮盒超豪華聖誕禮盒超豪華聖誕禮盒</div>
        <div class="remaining">1/1</div>
      </div>
      <div class="prize" id="prize-4">
        <div class="prize-cat prize-cat-B">B</div>
        <div class="prize-name">超豪華聖誕禮盒超豪華聖誕禮盒超豪華聖誕禮盒</div>
        <div class="remaining">1/1</div>
      </div>

      <div class="prize" id="prize-5">
        <div class="prize-cat prize-cat-C">C</div>
        <div class="prize-name">超豪華聖誕禮盒超豪華聖誕禮盒</div>
        <div class="remaining">1/1</div>
      </div>

      <div class="prize" id="prize-6">
        <div class="prize-cat prize-cat-D">D</div>
        <div class="prize-name">超豪華聖誕禮盒超豪華聖誕禮盒超豪華聖誕禮盒</div>
        <div class="remaining">1/1</div>
      </div>

      <div class="prize" id="prize-7">
        <div class="prize-cat prize-cat-D">D</div>
        <div class="prize-name">超豪華聖誕禮盒超豪華聖誕禮盒超豪華聖誕禮盒</div>
        <div class="remaining">1/1</div>
      </div>

      <div class="prize" id="prize-8">
        <div class="prize-cat prize-cat-E">E</div>
        <div class="prize-name">超豪華聖誕禮盒超豪華聖誕禮盒超豪華聖誕禮盒</div>
        <div class="remaining">1/1</div>
      </div>

      <div class="prize" id="prize-9">
        <div class="prize-cat prize-cat-E">E</div>
        <div class="prize-name">超豪華聖誕禮盒超豪華聖誕禮盒超豪華聖誕禮盒超豪華聖誕禮盒超豪華聖誕禮盒</div>
        <div class="remaining">1/1</div>
      </div>

      <div class="prize" id="prize-10">
        <div class="prize-cat prize-cat-E">E</div>
        <div class="prize-name">超豪華聖誕禮盒超豪華聖誕禮盒超豪華聖誕禮盒</div>
        <div class="remaining">1/1</div>
      </div>

      <div class="prize" id="prize-11">
        <div class="prize-cat prize-cat-E">E</div>
        <div class="prize-name">超豪華聖誕禮盒超豪華聖誕禮盒</div>
        <div class="remaining">2/2</div>
      </div>

      <div class="prize" id="prize-12">
        <div class="prize-cat prize-cat-E">E</div>
        <div class="prize-name">超豪華聖誕禮盒超豪華聖誕禮盒</div>
        <div class="remaining">5/5</div>
      </div>

      <div class="prize" id="prize-13">
        <div class="prize-cat prize-cat-E">E</div>
        <div class="prize-name">超豪華聖誕禮盒超豪華聖誕禮盒</div>
        <div class="remaining">2/2</div>
      </div>

      <div class="prize" id="prize-14">
        <div class="prize-cat prize-cat-E">F</div>
        <div class="prize-name">超豪華聖誕禮盒超豪華聖誕禮盒</div>
        <div class="remaining">1/1</div>
      </div>

      <div class="prize" id="prize-15">
        <div class="prize-cat prize-cat-F">F</div>
        <div class="prize-name">超豪華聖誕禮盒超豪華聖誕禮盒超豪華聖誕禮盒</div>
        <div class="remaining">1/1</div>
      </div>

      <div class="prize" id="prize-16">
        <div class="prize-cat prize-cat-F">F</div>
        <div class="prize-name">超豪華聖誕禮盒超豪華聖誕禮盒超豪華聖誕禮盒</div>
        <div class="remaining">1/1</div>
      </div>

      <div class="prize" id="prize-17">
        <div class="prize-cat prize-cat-F">F</div>
        <div class="prize-name">超豪華聖誕禮盒超豪華聖誕禮盒超豪華聖誕禮盒</div>
        <div class="remaining">1/1</div>
      </div>

      <div class="prize" id="prize-18">
        <div class="prize-cat prize-cat-F">F</div>
        <div class="prize-name">超豪華聖誕禮盒超豪華聖誕禮盒</div>
        <div class="remaining">2/2</div>
      </div>

      <div class="prize" id="prize-19">
        <div class="prize-cat prize-cat-F">F</div>
        <div class="prize-name">超豪華聖誕禮盒超豪華聖誕禮盒</div>
        <div class="remaining">4/4</div>
      </div>

      <div class="prize" id="prize-20">
        <div class="prize-cat prize-cat-F">F</div>
        <div class="prize-name">超豪華聖誕禮盒超豪華聖誕禮盒</div>
        <div class="remaining">2/2</div>
      </div>

      <div class="prize" id="prize-21">
        <div class="prize-cat prize-cat-G">G</div>
        <div class="prize-name">超豪華聖誕禮盒超豪華聖誕禮盒</div>
        <div class="remaining">4/4</div>
      </div>

      <div class="prize" id="prize-22">
        <div class="prize-cat prize-cat-G">G</div>
        <div class="prize-name">超豪華聖誕禮盒超豪華聖誕禮盒超豪華聖誕禮盒</div>
        <div class="remaining">1/1</div>
      </div>

      <div class="prize" id="prize-23">
        <div class="prize-cat prize-cat-G">G</div>
        <div class="prize-name">超豪華聖誕禮盒超豪華聖誕禮盒</div>
        <div class="remaining">1/1</div>
      </div>

      <div class="prize" id="prize-24">
        <div class="prize-cat prize-cat-G">G</div>
        <div class="prize-name">超豪華聖誕禮盒超豪華聖誕禮盒</div>
        <div class="remaining">2/2</div>
      </div>

      <div class="prize" id="prize-25">
        <div class="prize-cat prize-cat-G">G</div>
        <div class="prize-name">超豪華聖誕禮盒超豪華聖誕禮盒</div>
        <div class="remaining">3/3</div>
      </div>

      <div class="prize" id="prize-26">
        <div class="prize-cat prize-cat-G">G</div>
        <div class="prize-name">超豪華聖誕禮盒超豪華聖誕禮盒</div>
        <div class="remaining">2/2</div>
      </div>

    </div>
</body>

<script>
  function loadDoc() {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
        try {
          result = JSON.parse(this.responseText);
          result.Items.forEach(function(item) {
            try {
              console.log(item);
              id = "prize-" + item.id.S;
              document.getElementById(id).getElementsByClassName("prize-name")[0].innerHTML = item.name.S;
              total = document.getElementById(id).getElementsByClassName("remaining")[0].innerHTML.split("/")[1];
              document.getElementById(id).getElementsByClassName("remaining")[0].innerHTML = item.qty.N + "/" + total;
            } catch (e) {
              console.error("Error parsing item: ", e);
            }

          });

        } catch (e) {
          console.error("Error parsing JSON: ", e);
          console.log("Response: ", this.responseText);
        }
      }
    };
    xhttp.open("GET", "https://znojd4bork.execute-api.ap-southeast-1.amazonaws.com/default/listdb?httpMethod=GET", true);
    xhttp.send();
  }
  loadDoc()
  setInterval(loadDoc, 10000)
  </script>
  

</html>